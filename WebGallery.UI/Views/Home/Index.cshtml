@using Microsoft.Extensions.Configuration

@inject IConfiguration Configuration

@{
    string bannerImageUri = "";
    string appPath = Configuration.GetValue("HomeBannerImageAppPath", "");
    if (!string.IsNullOrWhiteSpace(appPath))
    {
        var appPathBytes = System.Text.Encoding.UTF8.GetBytes(appPath);
        string appPathBase64 = System.Convert.ToBase64String(appPathBytes);
        bannerImageUri = $"/files/image/{appPathBase64}";
    }
}

<main class="main-landing">
    <div class="row">
        <div class="col-12">
            <div class="row pt-4 mb-5 text-center">
                <div class="col-12">
                    <h2 class="text-white mb-4">Welcome</h2>
                </div>
            </div>
        </div>
    </div>

    <div class="landing-section">
        <div class="row">
            <div class="col-md-2">
                <img src="@bannerImageUri" alt="Banner Image" class="landing-img-banner">
            </div>
            <div class="col-md-9">
                <div class="landing-section--stats text-white">
                    <div class="row">
                        <div class="col-md-4">
                            <div data-url="/home/stats?itemType=media" data-async-view>
                                *loading*...
                            </div>
                        </div>
                        @* <div class="col-md-4">
                            <div data-url="/home/stats?itemType=gif" data-async-view>
                                *loading*...
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div data-url="/home/stats?itemType=video" data-async-view>
                                *loading*...
                            </div>
                        </div> *@
                        <div class="col-md-4">
                            <div data-url="/home/stats?itemType=album" data-async-view>
                                *loading*...
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div data-url="/home/stats?itemType=tag" data-async-view>
                                *loading*...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row pt-4 mb-5 text-center">
        <div class="col-12">
            <h3 class="text-white mb-4">Popular Tags</h3>
        </div>
    </div>

    <div class="row pt-4 mb-5 text-center">
        <div class="col-12">
                <h3 class="text-white mb-4"><a href="/uploads" style="color: white;">Upload</a></h3>
        </div>
    </div>

    <!-- Search Section -->
    <div class="row pt-4 mb-5 text-center">
        <div class="col-12">
            <!-- Collapsible Header -->
            <h3 class="text-white mb-4" data-bs-toggle="collapse" data-bs-target="#searchForm" aria-expanded="false" aria-controls="searchForm" style="cursor: pointer;">
                Search
            </h3>
            <!-- Collapsible Form -->
            <div class="collapse" id="searchForm">
                <form method="get" action="/single/search" class="search-form">
                    <div class="form-group">
                        <input type="text" name="albums" class="form-control" placeholder="Albums (comma-separated)">
                    </div>
                    <div class="form-group">
                        <input type="text" name="tags" class="form-control" placeholder="Tags (comma-separated) (AND-mode)">
                    </div>
                    <div class="form-group">
                        <input type="text" name="fileExtensions" class="form-control" placeholder="File Extensions (e.g., jpg, png)">
                    </div>
                    <div class="form-group">
                        <input type="text" name="mediaNameContains" class="form-control" placeholder="Filename (partial match)">
                    </div>
                    <button type="submit" class="btn btn-primary">Search</button>
                </form>
            </div>
        </div>
    </div>
    
@section Scripts {
    <script type="text/javascript" src="~/js/view-listener-home.js"></script>
}