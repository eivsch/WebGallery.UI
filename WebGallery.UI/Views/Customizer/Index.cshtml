@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@model WebGallery.UI.ViewModels.Customizer.SearchesViewModel

<!-- Search Section -->
<div class="row pt-4 mb-5 text-center">
    <div class="col-12">
        <!-- Collapsible Header -->
        <h3 class="text-white mb-4" data-bs-toggle="collapse" data-bs-target="#searchFormContainer" aria-expanded="true" aria-controls="searchFormContainer" style="cursor: pointer;">
            Search
        </h3>

        <!-- Saved Searches Dropdown -->
        <div class="mb-3" style="max-width:600px;margin:0 auto;">
            <div class="input-group">
                <select id="savedSearchesDropdown" class="form-select">
                    <option value="">-- Select a saved search --</option>
                    @foreach (var search in Model.SavedSearches)
                    {
                        <option value="@search.SearchName"
                                data-albums="@search.Albums"
                                data-tags="@search.Tags"
                                data-fileextensions="@search.FileExtensions"
                                data-medianamecontains="@search.MediaNameContains"
                                data-alltagsmustmatch="@search.AllTagsMustMatch"
                                data-maxsize="@search.MaxSize">
                            @search.SearchName
                        </option>
                    }
                </select>
                <button type="button" class="btn btn-danger" id="deleteSavedSearchBtn" title="Delete selected search" style="margin-left:10px;">Delete</button>
            </div>
        </div>

        <!-- Collapsible Form -->
        <div class="collapse show" id="searchFormContainer">
            <form method="get" action="/single/search" class="search-form" id="searchForm">
                <div class="form-group">
                    <input type="text" name="albums" class="form-control" placeholder="Albums (comma-separated)" id="albumsInput">
                </div>
                <div class="form-group">
                    <input type="text" name="tags" class="form-control" placeholder="Tags (comma-separated)" id="tagsInput">
                </div>
                <div class="form-check mb-3">
                    <input type="checkbox" name="allTagsMustMatch" class="form-check-input" id="allTagsMustMatch" value="true">
                    <label class="form-check-label text-white" for="allTagsMustMatch">All tags must match</label>
                </div>
                <div class="form-group">
                    <input type="text" name="fileExtensions" class="form-control" placeholder="File Extensions (e.g., jpg, png)" id="fileExtensionsInput">
                </div>
                <div class="form-group">
                    <input type="text" name="mediaNameContains" class="form-control" placeholder="Filename (partial match)" id="mediaNameContainsInput">
                </div>
                <div class="button-row">
                    <button type="submit" class="btn btn-primary">Search</button>
                    <button type="button" class="btn btn-secondary" id="saveSearchBtn">Save Search</button>
                </div>
                <span id="saveSearchStatus" style="margin-left:10px;color:#ef6c57;display:none;"></span>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script type="text/javascript" src="~/js/view-listener-customizer.js"></script>
}
